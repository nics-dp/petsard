flowchart TD
    Start([Original Data])
    Split[External Split<br/>Using SQL/Python<br/>Split by Key Variables]
    Subset1[Subset 1]
    Subset2[Subset 2]
    Subset3[Subset N...]
    Synth1[PETsARD Synthesis<br/>Subset 1]
    Synth2[PETsARD Synthesis<br/>Subset 2]
    Synth3[PETsARD Synthesis<br/>Subset N...]
    Merge[External Merge<br/>Using SQL/Python<br/>Integrate All Subsets]
    Eval[PETsARD Evaluation<br/>Overall Quality Check]
    End([Complete])

    Start --> Split
    Split --> Subset1
    Split --> Subset2
    Split --> Subset3
    Subset1 --> Synth1
    Subset2 --> Synth2
    Subset3 --> Synth3
    Synth1 --> Merge
    Synth2 --> Merge
    Synth3 --> Merge
    Merge --> Eval
    Eval --> End

    style Start fill:#e1f5fe
    style Split fill:#fff9c4
    style Subset1 fill:#fff9c4
    style Subset2 fill:#fff9c4
    style Subset3 fill:#fff9c4
    style Synth1 fill:#e1f5fe
    style Synth2 fill:#e1f5fe
    style Synth3 fill:#e1f5fe
    style Merge fill:#fff9c4
    style Eval fill:#e1f5fe
    style End fill:#c8e6c9

    classDef external fill:#fff9c4,stroke:#f57f17,stroke-width:2px
    classDef petsard fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef complete fill:#c8e6c9,stroke:#388e3c,stroke-width:2px

    class Split,Subset1,Subset2,Subset3,Merge external
    class Synth1,Synth2,Synth3,Eval petsard
    class End complete